<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุตุฉ ุชุณุฌูู ุงููุนุงููุงุช ุงูุชุฏุฑูุจูุฉ ูุฃูุงุฏูููุฉ ุฃุจูุฑุงุท ููุชุฏุฑูุจ</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

    <!-- CSS Styles -->
    <style>
        .brand-green { color: #0f5132; }
        .brand-green-bg { background-color: #198754; }
        .brand-green-bg:hover { background-color: #157347; }
        .hta-logo { max-height: 80px; }
        .registration-fields { display: none; }
        .payment-card { transition: transform 0.2s; }
        .payment-card:hover { transform: translateY(-5px); }
        form ol {
            padding-right: 1.2rem;
            padding-left: 0;
        }
        .instructor-name, .cpd-points-display {
            font-size: 0.9em;
            color: #6c757d;
            display: block;
            margin-top: 2px;
        }
        .custom-country-code-dropdown {
            flex: 0 0 auto;
            width: 180px;
            position: relative;
        }
        .custom-country-code-dropdown .form-control {
            padding-right: 2.5rem;
            padding-left: 0.75rem;
        }
        .custom-country-code-dropdown::after {
            content: '\f078';
            font-family: "Font Awesome 6 Free";
            font-weight: 900;
            position: absolute;
            right: 1rem;
            left: auto;
            top: 50%;
            transform: translateY(-50%);
            pointer-events: none;
            color: #6c757d;
        }
        .country-list {
            position: absolute;
            top: 100%;
            right: 0;
            left: 0;
            border: 1px solid #ced4da;
            border-top: none;
            background-color: white;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            list-style-type: none;
            padding: 0;
            margin: 0;
            border-radius: 0 0 0.375rem 0.375rem;
            text-align: right;
        }
        .country-list li {
            padding: 0.6rem 0.75rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .country-list li:hover, .country-list li[aria-selected="true"] {
            background-color: #f8f9fa;
        }
        .country-list li.selected {
            background-color: #e9ecef;
            font-weight: bold;
        }
        #phone-number {
             direction: ltr;
             text-align: left;
             flex: 1 1 auto;
             width: 1%;
             min-width: 200px;
        }
        #country-code-search {
            width: 100%;
        }
        .input-group {
            direction: ltr;
        }
        /* Custom Navbar Style */
        .navbar-custom-bg {
            background: linear-gradient(to left, #7c2bc9, #6a0dad);
        }
        .navbar-custom-bg .navbar-nav .nav-link {
            color: #f8f9fa;
            font-weight: 500;
        }
        .navbar-custom-bg .navbar-nav .nav-link:hover {
            color: #ffffff;
        }
        .brand-name-en {
            margin-right: 0.5rem;
        }

        /* === ุชุญุณููุงุช ุชุตููู ุงูุนููุงู === */
        .page-title-wrapper {
            text-align: center;
            margin-bottom: 2rem;
            position: relative;
            padding-bottom: 1rem;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.8s ease-out 0.3s forwards;
        }

        .page-title-wrapper::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: linear-gradient(to right, #6a0dad, #198754);
            border-radius: 2px;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .page-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            line-height: 1.3;
            color: #212529;
        }

        .page-subtitle {
            font-size: 1.3rem;
            color: #6a0dad;
            margin-bottom: 0;
            font-weight: 500;
        }
        /* === ููุงูุฉ ุชุญุณููุงุช ุงูุชุตููู === */

    </style>
</head>
<body>

    <!-- ููุงูุฐ ููุจุซูุฉ ูุฎุตุตุฉ ููุฃุฎุทุงุฑ ูุงููุฌุงุญ -->
    <div class="modal fade" id="errorModal" tabindex="-1" aria-labelledby="errorModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-danger text-white">
                    <h5 class="modal-title" id="errorModalLabel"><i class="fas fa-exclamation-triangle me-2"></i>ุฎุทุฃ ูู ุงูุจูุงูุงุช</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p id="errorMessage"></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ุฅุบูุงู</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title" id="successModalLabel"><i class="fas fa-check-circle me-2"></i>ุชู ุงูุชุณุฌูู ุจูุฌุงุญ!</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p id="successMessage"></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" data-bs-dismiss="modal">ูุชุงุจุนุฉ</button>
                </div>
            </div>
        </div>
    </div>

    <!-- HTML Body Content -->
    <nav class="navbar navbar-expand-lg navbar-dark navbar-custom-bg">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <span class="brand-name-ar">ุฃูุงุฏูููุฉ ุฃุจูุฑุงุท ููุชุฏุฑูุจ</span>
                <span class="brand-name-hta d-inline-block d-lg-none"> | HTA</span>
                <span class="brand-name-en d-none d-lg-inline-block">| Hippocrates Training Academy</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="about.html">About</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <section id="registration-section" class="container my-5">
        <div class="row justify-content-center">
            <div class="col-lg-8 col-md-10">
                <div class="card shadow-lg">
                    <div class="card-body p-4 p-md-5">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <div>
                                <div class="page-title-wrapper">
                                    <h1 class="page-title">
                                        <span style="color: black;">ููุตุฉ</span> ุชุณุฌูู ุงููุนุงููุงุช ุงูุชุฏุฑูุจูุฉ
                                    </h1>
                                    <p class="page-subtitle">ุฃูุงุฏูููุฉ ุฃุจูุฑุงุท ููุชุฏุฑูุจ</p>
                                </div>
                                <p class="text-muted" id="course-details-display"></p>
                            </div>
                            <img src="hta-logo.png" alt="ุดุนุงุฑ ุฃูุงุฏูููุฉ ุฃุจูุฑุงุท" class="hta-logo" loading="lazy">
                        </div>

                        <div class="mb-4">
                            <label for="course-selector" class="form-label h5">ูุฑุฌู ุงุฎุชูุงุฑ ุงููุนุงููุฉ ุงูุชุฏุฑูุจูุฉ ุงูุชู ุชุฑุบุจ ุจุงูุชุณุฌูู ุจูุง</label>
                            <select class="form-select form-select-lg" id="course-selector" required onchange="onCourseSelect()" disabled>
                                <option value="" disabled selected>... ุฌุงุฑู ุชุญููู ุงููุนุงููุงุช ุงูุชุฏุฑูุจูุฉ <i class="fas fa-spinner fa-spin"></i></option>
                            </select>
                        </div>

                        <div id="registration-fields" class="registration-fields">
                            <div class="alert alert-info" role="alert">
                                <i class="fas fa-info-circle"></i> <strong>ููุงุญุธุฉ ูุงูุฉ:</strong> ุจุนุฏ ุฅุฑุณุงู ูุฐุง ุงููููุฐุฌุ ุณุชุธูุฑ ูู <strong>ุทุฑู ุงูุฏูุน ุงููุนุชูุฏุฉ</strong> ูู ุงูุฃุณูู ูุฅููุงู ุนูููุฉ ุงูุชุณุฌูู.
                            </div>

                            <form id="registrationForm" class="g-3" role="form" novalidate>
                                <input type="hidden" id="course-id-input" name="Course ID">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="fullNameAr" class="form-label">ุงูุงุณู ุงููุงูู (ุจุงูุนุฑุจูุฉ)</label>
                                        <input type="text" class="form-control" id="fullNameAr" name="Full Name (Arabic)" required aria-describedby="nameAr-help">
                                        <div id="nameAr-help" class="form-text">ูุฌุจ ุฃู ูุญุชูู ุนูู ุฃุญุฑู ุนุฑุจูุฉ ููุท.</div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="fullNameEn" class="form-label">Full Name (English)</label>
                                        <input type="text" class="form-control" id="fullNameEn" name="Full Name (English)" required aria-describedby="nameEn-help">
                                        <div id="nameEn-help" class="form-text">Should contain only English letters.</div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="email" class="form-label">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                                        <input type="email" class="form-control" id="email" name="Email" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="phone-number" class="form-label">ุฑูู ุงููุงุชู (ูุงุชุณุงุจ)</label>
                                        <div class="input-group">
                                             <input type="tel" class="form-control" id="phone-number" name="Phone Number" placeholder="ูุซุงู: 79xxxxxxx" required aria-label="Phone number" aria-describedby="phone-help">
                                            <div class="custom-country-code-dropdown">
                                                <input type="text" class="form-control" id="country-code-search" placeholder="ุงูุชุจ ุงุณู ุงูุฏููุฉ ููุจุญุซ" autocomplete="off" role="combobox" aria-haspopup="listbox" aria-expanded="false" aria-owns="country-list">
                                                <input type="hidden" id="country-code-value" name="CountryCode" value="+962">
                                                <ul class="country-list" id="country-list" style="display: none;" role="listbox"></ul>
                                            </div>
                                        </div>
                                        <div id="phone-help" class="form-text text-muted">ูุฑุฌู ุฅุฏุฎุงู ุฑูู ุงููุงุชู ุจุฏูู ุงูุตูุฑ ูู ุงูุจุฏุงูุฉ (ูุซุงู: 79xxxxxxx). ููููู ุงูุจุญุซ ุนู ุงูุฏููุฉ ุจูุชุงุจุฉ ุงุณููุง ูู ุงูุญูู ุงููุฌุงูุฑ.</div>
                                    </div>
                                </div>
                                 <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="nationality" class="form-label">ุงูุฌูุณูุฉ</label>
                                        <select class="form-select" id="nationality" name="Nationality" required onchange="toggleOtherNationality(this.value)">
                                            <option value="" disabled selected>ุงุฎุชุฑ ุฌูุณูุชู</option>
                                            <option value="ุงูุฃุฑุฏู">ุงูุฃุฑุฏู</option>
                                            <option value="ุงูุฅูุงุฑุงุช ุงูุนุฑุจูุฉ ุงููุชุญุฏุฉ">ุงูุฅูุงุฑุงุช ุงูุนุฑุจูุฉ ุงููุชุญุฏุฉ</option>
                                            <option value="ุงูุจุญุฑูู">ุงูุจุญุฑูู</option>
                                            <option value="ุชููุณ">ุชููุณ</option>
                                            <option value="ุงูุฌุฒุงุฆุฑ">ุงูุฌุฒุงุฆุฑ</option>
                                            <option value="ุฌุฒุฑ ุงูููุฑ">ุฌุฒุฑ ุงูููุฑ</option>
                                            <option value="ุฌูุจูุชู">ุฌูุจูุชู</option>
                                            <option value="ุงูุณุนูุฏูุฉ">ุงูุณุนูุฏูุฉ</option>
                                            <option value="ุงูุณูุฏุงู">ุงูุณูุฏุงู</option>
                                            <option value="ุณูุฑูุง">ุณูุฑูุง</option>
                                            <option value="ุงูุตููุงู">ุงูุตููุงู</option>
                                            <option value="ุงูุนุฑุงู">ุงูุนุฑุงู</option>
                                            <option value="ุนููุงู">ุนููุงู</option>
                                            <option value="ููุณุทูู">ููุณุทูู</option>
                                            <option value="ูุทุฑ">ูุทุฑ</option>
                                            <option value="ุงููููุช">ุงููููุช</option>
                                            <option value="ูุจูุงู">ูุจูุงู</option>
                                            <option value="ููุจูุง">ููุจูุง</option>
                                            <option value="ูุตุฑ">ูุตุฑ</option>
                                            <option value="ุงููุบุฑุจ">ุงููุบุฑุจ</option>
                                            <option value="ุงูููู">ุงูููู</option>
                                            <option value="ููุฑูุชุงููุง">ููุฑูุชุงููุง</option>
                                            <option value="ุฃุฎุฑู">ุฃุฎุฑู</option>
                                        </select>
                                        <div id="other-nationality-field" class="mt-2" style="display:none;">
                                            <input type="text" class="form-control" name="Other Nationality" placeholder="ูุฑุฌู ุชุญุฏูุฏ ุจูุฏู">
                                        </div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="degree" class="form-label">ุงูุฏุฑุฌุฉ ุงูุนูููุฉ</label>
                                        <select class="form-select" id="degree" name="Academic Degree">
                                            <option>ุนูู ููุงุนุฏ ุงูุฏุฑุงุณุฉ / Student</option>
                                            <option>ุจูุงููุฑููุณ / Bachelor</option>
                                            <option>ูุงุฌุณุชูุฑ / Master</option>
                                            <option>ุฏูุชูุฑุงู / PhD</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <label for="cpd" class="form-label">ูู ุชุฑุบุจ ุจุงูุญุตูู ุนูู ููุงุท ุงูุชุนููู ุงููููู ุงููุณุชูุฑ (CPD)ุ</label>
                                    <select class="form-select" id="cpd" name="CPD Request" onchange="toggleCPDFields(this.value)">
                                        <option value="ูุง">ูุง</option>
                                        <option value="ูุนู">ูุนู</option>
                                    </select>
                                </div>

                                <div id="cpd-fields" style="display:none;">
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label for="nationalId" class="form-label">ุงูุฑูู ุงููุทูู</label>
                                            <input type="text" class="form-control" id="nationalId" name="National ID">
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label for="licenseNo" class="form-label">ุฑูู ุงููุฒุงููุฉ (ูุฒุงุฑุฉ ุงูุตุญุฉ)</label>
                                            <input type="text" class="form-control" id="licenseNo" name="License Number">
                                        </div>
                                    </div>
                                    <p class="text-success small">โ ุณูุชู ุฅุถุงูุฉ <span id="cpd-fee-display">5</span> ุฏูุงููุฑ ุฅูู ุฑุณูู ุงููุนุงููุฉ ุงูุชุฏุฑูุจูุฉ ููุงุจู ุดูุงุฏุฉ CPD.</p>
                                </div>

                                <div class="alert alert-secondary" role="alert">
                                    ๐ฐ ุงููุจูุบ ุงูุฅุฌูุงูู ุงููุทููุจ: <strong id="total-fee">...</strong>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label fw-bold">ุงูุชุนูุฏ ูุงูุฅูุฑุงุฑ:</label>
                                    <div class="border p-3" style="max-height: 200px; overflow-y: auto; background-color: #f8f9fa; font-size: 0.9rem;">
                                        <p>ุฃุชุนูุฏ ุฃูุงุ ูุฏุฎู ุงูุจูุงูุงุช ูู ูุฐุง ุงููููุฐุฌ ุงูุฅููุชุฑูููุ ุจุฃู ุฌููุน ุงููุนูููุงุช ุงูุชู ููุช ุจุฅุฏุฎุงููุง ุตุญูุญุฉ ูุฏูููุฉ.</p>
                                        <p>ููุง ุฃูุฑู ุจุฃููู ุนูู ุฏุฑุงูุฉ ุชุงูุฉ ุจุทุจูุนุฉ ุงููุนุงููุฉ ุงูุชุฏุฑูุจูุฉ ุงูุชู ุฃุณุฌู ูููุงุ ููุง ูุฏ ุชุชุถููู โ ุฅู ููุฌุฏ โ ูู ุชุทุจููุงุช ุนูููุฉ ุนูู ููุณู ุฃู ุนูู ุงูุฒููุงุก ุงููุดุงุฑูููุ ุฃู ุชุฏุงุฎูุงุช ุถูู ุงูุชูุงุฑูู ุงูุชุฏุฑูุจูุฉ ุงูุชุทุจูููุฉ.</p>
                                        <p>ูุฃุชุนูุฏ ุจูุง ููู:</p>
                                        <ol>
                                            <li>ุงูุญูุงุธ ุนูู ุฎุตูุตูุฉ ุงููุนุงููุฉ ุงูุชุฏุฑูุจูุฉ ูุงุญุชุฑุงู ุฎุตูุตูุฉ ุฌููุน ุงููุดุงุฑููู ูุงูุฒููุงุก.</li>
                                            <li>ุงูุงูุชุฒุงู ุจุญุถูุฑ ูุงูู ูุฏุฉ ุงููุนุงููุฉ ุงูุชุฏุฑูุจูุฉ ููู ุงูุจุฑูุงูุฌ ุงููุนูู.</li>
                                            <li>ุฃุชููู ูุฃูุฑู ุจุฃู ุนุฏู ุงูุญุถูุฑ ุงููุงูู ูุฃู ูู ุฃูุงู ุงููุนุงููุฉ ูุฏ ูุคุฏู ุฅูู ุนุฏู ุงุณุชุญูุงู ุดูุงุฏุฉ ุงููุดุงุฑูุฉ (ูู ุญุงู ูุงูุช ูุชููุฑุฉ ูุชูู ุงููุนุงููุฉ).</li>
                                            <li>ุฃูุฑู ุจุฃููู ุงุทูุนุช ุนูู ุณูุงุณุฉ ุฅูุบุงุก ุงูุญุฌุฒ ูุงูุชุบููุฑ ูููุนุงููุงุช ุงูุชุฏุฑูุจูุฉ ุงูุตุงุฏุฑุฉ ุนู ุฃูุงุฏูููุฉ ุฃุจูุฑุงุท ููุชุฏุฑูุจ ูุงููุฐููุฑุฉ ุนูู ุงูุฑุงุจุท ุงูุชุงููุ ูุฃูุงูู ุนูู ุฌููุน ุจููุฏูุง ูุดุฑูุทูุง ุฏูู ุชุญูุธ:
                                                <br>
                                                <a href="https://drive.google.com/open?id=1O5Q2ryIn4Eh5nsQf2Ycn7SytKWDKL0ql&usp=drive_fs" class="brand-green" target="_blank">๐ ุณูุงุณุฉ ุฅูุบุงุก ุงูุญุฌุฒ ูุงูุชุบููุฑ ูููุนุงููุงุช ุงูุชุฏุฑูุจูุฉ</a>
                                            </li>
                                            <li>ุฃุชููู ุฃู ุจุนุถ ุงููุนุงููุงุช ุงูุชุฏุฑูุจูุฉ ูุฏ ูุง ุชุชุถูู ุดูุงุฏุฉ ูุดุงุฑูุฉ ุฃู ุชุฏุฑูุจูุง ุนููููุงุ ูุฐูู ุจุญุณุจ ุทุจูุนุฉ ูู ูุนุงููุฉ.</li>
                                        </ol>
                                        <p><strong>ูุจุฐูู ุฃุชุญูู ูุงูู ุงููุณุคูููุฉ ุนู ุตุญุฉ ุงูุจูุงูุงุช ูุงูุงูุชุฒุงู ุจูุง ูุฑุฏ ุฃุนูุงู.</strong></p>
                                    </div>
                                </div>

                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" id="terms" required>
                                    <label class="form-check-label" for="terms">
                                        ุฃูุงูู ุนูู ุงูุชุนูุฏ ูุงูุฅูุฑุงุฑ ุฃุนูุงู ูุฃุนูู ุฃู ุงูุชุณุฌูู ูู ููุชูู ุฅูุง ุจุนุฏ ุงูุฏูุน.
                                    </label>
                                </div>

                                <button type="submit" class="btn brand-green-bg text-white btn-lg w-100">
                                    ุฃุฑุณู ุจูุงูุงุชู ูุงุนุฑุถ ุทุฑู ุงูุฏูุน
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="payment-section" class="container my-5" style="display:none;">
        <div class="text-center mb-5">
            <img src="hta-logo.png" alt="ุดุนุงุฑ ุฃูุงุฏูููุฉ ุฃุจูุฑุงุท" class="hta-logo mb-3" loading="lazy">
            <h1 class="display-5 brand-green fw-bold">ุดูุฑุงู ูุชุณุฌููู!</h1>
            <p class="lead text-muted">ูุฑุฌู ุงุฎุชูุงุฑ ุฅุญุฏู ุทุฑู ุงูุฏูุน ุงููุนุชูุฏุฉ ุงูุชุงููุฉ ูุฅููุงู ุญุฌุฒ ููุนุฏู.</p>
        </div>
        <div class="row g-4">
            <div class="col-md-6">
                <div class="card h-100 shadow payment-card">
                    <div class="card-body">
                        <h5 class="card-title"><i class="fas fa-university me-2"></i>ุงูุชุญููู ุงูุจููู</h5>
                        <p class="card-text">
                            <strong>ุงุณู ุงูุญุณุงุจ:</strong> ACADEMYAT ABQRAT LEL TAALEM<br>
                            <strong>ุฑูู ุงูุญุณุงุจ:</strong> 0020174190615101<br>
                            <strong>IBAN:</strong> JO51UBSI1120000020174190615101<br>
                            <strong>SWIFT:</strong> UBSIJOAX
                        </p>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card h-100 shadow payment-card">
                    <div class="card-body">
                        <h5 class="card-title"><i class="fas fa-wallet me-2"></i>ุงููุญูุธุฉ ุงูุฅููุชุฑูููุฉ (ุฒูู ูุงุด)</h5>
                        <p class="card-text">
                            <strong>ุงูุฑูู:</strong> 00962796100112
                        </p>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card h-100 shadow payment-card">
                    <div class="card-body">
                        <h5 class="card-title"><i class="fas fa-mobile-alt me-2"></i>ุฎุฏูุฉ CLIQ โ ุจูู ุงูุงุชุญุงุฏ</h5>
                        <p class="card-text">
                            <strong>ุงูุงุณู ุงููุณุชุนุงุฑ:</strong> HTAJO
                        </p>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card h-100 shadow payment-card">
                    <div class="card-body">
                        <h5 class="card-title"><i class="fas fa-money-bill-wave me-2"></i>ุชุญููู ุนุจุฑ ููุงุชุจ ุงูุตุฑุงูุฉ</h5>
                        <p class="card-text">
                            <strong>ุงูุงุณู:</strong> AMER SALEH HUSSIEN AL-HAMDAN<br>
                            <small>(ุงูุนูุงููุฉ ุฃู ุฃุจู ุดูุฎุฉ)</small>
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="alert alert-warning mt-5 text-center" role="alert">
            <h5 class="alert-heading"><i class="fas fa-exclamation-triangle me-2"></i>ููุงุญุธุฉ ูุงูุฉ</h5>
            <p class="mb-0">
                ูุฑุฌู ุฅุฑุณุงู ุตูุฑุฉ ุนู ูุตู ุงูุฏูุน ุจุนุฏ ุฅุชูุงู ุงูุชุญููู <strong>ูุงุณู ุตุงุญุจ ุงูุญุณุงุจ</strong> ูุชุฃููุฏ ุงูุญุฌุฒ ุฑุณูููุง. ูุฃู ุงุณุชูุณุงุฑุ ูุฑุฌู ุงูุชูุงุตู ูุนูุง ุนุจุฑ ุงููุงุชู ุฃู ุชุทุจูู ูุงุชุณุงุจ ุนูู ุงูุฑูู: <strong>+962787269996</strong>.
            </p>
        </div>
        <div class="text-center mt-4">
            <a href="https://wa.me/962787269996" target="_blank" class="btn brand-green-bg text-white btn-lg">
                <i class="fab fa-whatsapp me-2"></i> ุฃุฑุณู ุตูุฑุฉ ุงูุฅูุตุงู ุนุจุฑ ูุงุชุณุงุจ
            </a>
        </div>
    </section>

    <footer class="navbar-custom-bg text-white text-center py-4 mt-5">
        <div class="container">
            <p class="mb-2">
                <strong>ููุงุณุชูุณุงุฑ ูุงูุชูุงุตู:</strong>
                <a href="https://wa.me/962787269996" target="_blank" class="text-white text-decoration-none mx-2">
                    <i class="fab fa-whatsapp"></i> +962787269996
                </a>
            </p>
            <p class="mb-0">&copy; 2025 Hippocrates Training Academy. All Rights Reserved.</p>
        </div>
    </footer>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- ======================================================================= -->
    <!-- ========================= JAVASCRIPT LOGIC ========================= -->
    <!-- ======================================================================= -->
    <script>
        // --- Global Variables ---
        const CSV_SHEET_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTQghOdUAW_v2svTLHGwZWpWU2x7tdsE24m8LPOGKFZNlef2q91JD88aEoMF5psdDbJzYZV4TmhoWig/pub?gid=0&single=true&output=csv";
        let coursesDB = {};
        let currentCourse = null;

        const countries = [
             { name: 'ุฃูุบุงูุณุชุงู', code: '+93' }, { name: 'ุฃูุจุงููุง', code: '+355' }, { name: 'ุงูุฌุฒุงุฆุฑ', code: '+213' },
             { name: ' Samoa ุงูุฃูุฑูููุฉ', code: '+1684' }, { name: 'ุฃูุฏูุฑุง', code: '+376' }, { name: 'ุฃูุบููุง', code: '+244' },
             { name: 'ุฃูุบูููุง', code: '+1264' }, { name: 'ุฃูุชุงุฑูุชููุง', code: '+672' }, { name: 'ุฃูุชูุบูุง ูุจุงุฑุจูุฏุง', code: '+1268' },
             { name: 'ุงูุฃุฑุฌูุชูู', code: '+54' }, { name: 'ุฃุฑููููุง', code: '+374' }, { name: 'ุฃุฑูุจุง', code: '+297' },
             { name: 'ุฃุณุชุฑุงููุง', code: '+61' }, { name: 'ุงูููุณุง', code: '+43' }, { name: 'ุฃุฐุฑุจูุฌุงู', code: '+994' },
             { name: 'ุงูุจูุงูุง', code: '+1242' }, { name: 'ุงูุจุญุฑูู', code: '+973' }, { name: 'ุจูุบูุงุฏูุด', code: '+880' },
             { name: 'ุจุฑุจุงุฏูุณ', code: '+1246' }, { name: 'ุจููุงุฑูุณูุง', code: '+375' }, { name: 'ุจูุฌููุง', code: '+32' },
             { name: 'ุจููุฒ', code: '+501' }, { name: 'ุจููู', code: '+229' }, { name: 'ุจุฑููุฏุง', code: '+1441' },
             { name: 'ุจูุชุงู', code: '+975' }, { name: 'ุจูููููุง', code: '+591' }, { name: 'ุงูุจูุณูุฉ ูุงููุฑุณู', code: '+387' },
             { name: 'ุจูุชุณูุงูุง', code: '+267' }, { name: 'ุงูุจุฑุงุฒูู', code: '+55' }, { name: 'ุฅูููู ุงููุญูุท ุงูููุฏู ุงูุจุฑูุทุงูู', code: '+246' },
             { name: 'ุจุฑููุงู ุฏุงุฑ ุงูุณูุงู', code: '+673' }, { name: 'ุจูุบุงุฑูุง', code: '+359' }, { name: 'ุจูุฑูููุง ูุงุณู', code: '+226' },
             { name: 'ุจูุฑููุฏู', code: '+257' }, { name: 'ููุจูุฏูุง', code: '+855' }, { name: 'ุงููุงููุฑูู', code: '+237' },
             { name: 'ููุฏุง', code: '+1' }, { name: 'ุงูุฑุฃุณ ุงูุฃุฎุถุฑ', code: '+238' }, { name: 'ุฌุฒุฑ ูุงููุงู', code: '+1345' },
             { name: 'ุฌูููุฑูุฉ ุฃูุฑูููุง ุงููุณุทู', code: '+236' }, { name: 'ุชุดุงุฏ', code: '+235' }, { name: 'ุชุดููู', code: '+56' },
             { name: 'ุงูุตูู', code: '+86' }, { name: 'ุฌุฒูุฑุฉ ุนูุฏ ุงููููุงุฏ', code: '+61' }, { name: 'ุฌุฒุฑ ููููุณ (ูููููุบ)', code: '+672' },
             { name: 'ูููููุจูุง', code: '+57' }, { name: 'ุฌุฒุฑ ุงูููุฑ', code: '+269' }, { name: 'ุฌุฒุฑ ููู', code: '+682' },
             { name: 'ููุณุชุงุฑููุง', code: '+506' }, { name: 'ุณุงุญู ุงูุนุงุฌ', code: '+225' }, { name: 'ูุฑูุงุชูุง', code: '+385' },
             { name: 'ููุจุง', code: '+53' }, { name: 'ูุจุฑุต', code: '+357' }, { name: 'ุฌูููุฑูุฉ ุงูุชุดูู', code: '+420' },
             { name: 'ุฌูููุฑูุฉ ุงููููุบู ุงูุฏูููุฑุงุทูุฉ', code: '+243' }, { name: 'ุงูุฏููุงุฑู', code: '+45' }, { name: 'ุฌูุจูุชู', code: '+253' },
             { name: 'ุฏููููููุง', code: '+1767' }, { name: 'ุฌูููุฑูุฉ ุงูุฏููููููุงู', code: '+1809' }, { name: 'ุงูุฅููุงุฏูุฑ', code: '+593' },
             { name: 'ูุตุฑ', code: '+20' }, { name: 'ุงูุณููุงุฏูุฑ', code: '+503' }, { name: 'ุบูููุง ุงูุงุณุชูุงุฆูุฉ', code: '+240' },
             { name: 'ุฅุฑูุชุฑูุง', code: '+291' }, { name: 'ุฅุณุชูููุง', code: '+372' }, { name: 'ุฅุซููุจูุง', code: '+251' },
             { name: 'ุฌุฒุฑ ููููุงูุฏ (ูุงููููุงุณ)', code: '+500' }, { name: 'ุฌุฒุฑ ูุงุฑู', code: '+298' }, { name: 'ููุฌู', code: '+679' },
             { name: 'ููููุฏุง', code: '+358' }, { name: 'ูุฑูุณุง', code: '+33' }, { name: 'ุบูุงูุง ุงููุฑูุณูุฉ', code: '+594' },
             { name: 'ุจูููููุฒูุง ุงููุฑูุณูุฉ', code: '+689' }, { name: 'ุงูุบุงุจูู', code: '+241' }, { name: 'ุบุงูุจูุง', code: '+220' },
             { name: 'ุฌูุฑุฌูุง', code: '+995' }, { name: 'ุฃููุงููุง', code: '+49' }, { name: 'ุบุงูุง', code: '+233' },
             { name: 'ุฌุจู ุทุงุฑู', code: '+350' }, { name: 'ุงููููุงู', code: '+30' }, { name: 'ุบุฑูููุงูุฏ', code: '+299' },
             { name: 'ุบุฑููุงุฏุง', code: '+1473' }, { name: 'ุบูุงุฏููุจ', code: '+590' }, { name: 'ุบูุงู', code: '+1671' },
             { name: 'ุบูุงุชููุงูุง', code: '+502' }, { name: 'ุบูุฑูุฒู', code: '+44' }, { name: 'ุบูููุง', code: '+224' },
             { name: 'ุบูููุง ุจูุณุงู', code: '+245' }, { name: 'ุบูุงูุง', code: '+592' }, { name: 'ูุงูุชู', code: '+509' },
             { name: 'ุงููุงุชููุงู', code: '+379' }, { name: 'ููุฏูุฑุงุณ', code: '+504' }, { name: 'ูููุบ ูููุบ', code: '+852' },
             { name: 'ุงููุฌุฑ', code: '+36' }, { name: 'ุขูุณููุฏุง', code: '+354' }, { name: 'ุงูููุฏ', code: '+91' },
             { name: 'ุฅูุฏูููุณูุง', code: '+62' }, { name: 'ุฅูุฑุงู', code: '+98' }, { name: 'ุงูุนุฑุงู', code: '+964' },
             { name: 'ุฃูุฑููุฏุง', code: '+353' }, { name: 'ุฌุฒูุฑุฉ ูุงู', code: '+44' }, { name: 'ุฅุณุฑุงุฆูู', code: '+972' },
             { name: 'ุฅูุทุงููุง', code: '+39' }, { name: 'ุฌุงูุงููุง', code: '+1876' }, { name: 'ุงููุงุจุงู', code: '+81' },
             { name: 'ุฌูุฑุฒู', code: '+44' }, { name: 'ุงูุฃุฑุฏู', code: '+962' }, { name: 'ูุงุฒุงุฎุณุชุงู', code: '+7' },
             { name: 'ููููุง', code: '+254' }, { name: 'ููุฑูุจุงุชู', code: '+686' }, { name: 'ุงููููุช', code: '+965' },
             { name: 'ููุฑุบูุฒุณุชุงู', code: '+996' }, { name: 'ูุงูุณ', code: '+856' }, { name: 'ูุงุชููุง', code: '+371' },
             { name: 'ูุจูุงู', code: '+961' }, { name: 'ููุณูุชู', code: '+266' }, { name: 'ููุจูุฑูุง', code: '+231' },
             { name: 'ููุจูุง', code: '+218' }, { name: 'ููุฎุชูุดุชุงูู', code: '+423' }, { name: 'ููุชูุงููุง', code: '+370' },
             { name: 'ูููุณูุจูุฑุบ', code: '+352' }, { name: 'ูุงูุงู', code: '+853' }, { name: 'ููุฏูููุง ุงูุดูุงููุฉ', code: '+389' },
             { name: 'ูุฏุบุดูุฑ', code: '+261' }, { name: 'ูุงูุงูู', code: '+265' }, { name: 'ูุงููุฒูุง', code: '+60' },
             { name: 'ุงููุงูุฏูู', code: '+960' }, { name: 'ูุงูู', code: '+223' }, { name: 'ูุงูุทุง', code: '+356' },
             { name: 'ุฌุฒุฑ ูุงุฑุดุงู', code: '+692' }, { name: 'Martinique', code: '+596' }, { name: 'ููุฑูุชุงููุง', code: '+222' },
             { name: 'ููุฑูุดููุณ', code: '+230' }, { name: 'ูุงููุช', code: '+262' }, { name: 'ุงูููุณูู', code: '+52' },
             { name: 'ููุงูุงุช ูููุฑูููุณูุง ุงููุชุญุฏุฉ', code: '+691' }, { name: 'ูููุฏููุง', code: '+373' }, { name: 'ูููุงูู', code: '+377' },
             { name: 'ููุบูููุง', code: '+976' }, { name: 'ููุบูููุง', code: '+992' }, { name: 'ุจุงูุงู', code: '+680' }, { name: 'ููุณุทูู', code: '+970' },
             { name: 'ุจููุง', code: '+507' }, { name: 'ุจุงุจูุง ุบูููุง ุงูุฌุฏูุฏุฉ', code: '+675' }, { name: 'ุจุงุฑุงุบูุงู', code: '+675' },
             { name: 'ุจูุฑู', code: '+51' }, { name: 'ุงูููุจูู', code: '+63' }, { name: 'ุฌุฒุฑ ุจูุชููุฑู', code: '+64' },
             { name: 'ุจูููุฏุง', code: '+48' }, { name: 'ุงูุจุฑุชุบุงู', code: '+351' }, { name: 'ุจูุฑุชูุฑููู', code: '+1787' },
             { name: 'ูุทุฑ', code: '+974' }, { name: 'ุฑููุงููุง', code: '+40' }, { name: 'ุฑูุณูุง', code: '+7' },
             { name: 'ุฑูุงูุฏุง', code: '+250' }, { name: 'ุฑููููู', code: '+262' }, { name: 'ุณุงู ุจุงุฑุชููููู', code: '+590' },
             { name: 'ุณุงูุช ูููููุง', code: '+290' }, { name: 'ุณุงูุช ููุชุณ ูููููุณ', code: '+1869' }, { name: 'ุณุงูุช ููุชุณ ูููููุณ', code: '+1758' },
             { name: 'ุณุงูุช ูุงุฑุชู (ุงูุฌุฒุก ุงููุฑูุณู)', code: '+590' }, { name: 'ุณุงู ุจููุฑ ููููููู', code: '+508' },
             { name: 'ุณุงูุช ููุณูุช ูุงูุบุฑููุงุฏูู', code: '+1784' }, { name: 'ุณุงููุง ุงูุฃูุฑูููุฉ', code: '+684' },
             { name: 'ุณุงู ูุงุฑููู', code: '+378' }, { name: 'ุณุงู ุชููู ูุจุฑููุณูุจ', code: '+239' }, { name: 'ุงูุณุนูุฏูุฉ', code: '+966' }, { name: 'ุตุฑุจูุง', code: '+381' }, { name: 'ุณููุช ูุงุฑุชู (ุงูุฌุฒุก ุงูููููุฏู)', code: '+1721' },
             { name: 'ุณูููุงููุง', code: '+421' }, { name: 'ุณููููููุง', code: '+386' }, { name: 'ุฌุฒุฑ ุณูููุงู', code: '+677' },
             { name: 'ุงูุตููุงู', code: '+252' }, { name: 'ุฌููุจ ุฃูุฑูููุง', code: '+27' }, { name: 'ููุฑูุง ุงูุฌููุจูุฉ', code: '+82' },
             { name: 'ุฌููุจ ุงูุณูุฏุงู', code: '+211' }, { name: 'ุฅุณุจุงููุง', code: '+34' }, { name: 'ุณุฑููุงููุง', code: '+94' },
             { name: 'ุงูุณูุฏุงู', code: '+249' }, { name: 'ุณูุฑููุงู', code: '+597' }, { name: 'ุณูุงูุจุงุฑุฏ ูุฌุงู ูุงูู', code: '+47' },
             { name: 'ุฅุณูุงุชููู', code: '+268' }, { name: 'ุชุงููุงู', code: '+886' }, { name: 'ุทุงุฌููุณุชุงู', code: '+992' },
             { name: 'ุชูุฒุงููุง', code: '+255' }, { name: 'ุชุงููุงูุฏ', code: '+66' }, { name: 'ุชูููุฑ ุงูุดุฑููุฉ', code: '+670' },
             { name: 'ุชูุบู', code: '+228' }, { name: 'ุชูููุงู', code: '+690' }, { name: 'ุชููุบุง', code: '+676' },
             { name: 'ุชููุณ', code: '+216' }, { name: 'ุชุฑููุง', code: '+90' }, { name: 'ุชุฑููุงูุณุชุงู', code: '+993' },
             { name: 'ุฌุฒุฑ ุชูุฑูุณ ููุงูููุณ', code: '+1649' }, { name: 'ุชููุงูู', code: '+688' }, { name: 'ุฃูุบูุฏุง', code: '+256' },
             { name: 'ุฃููุฑุงููุง', code: '+380' }, { name: 'ุงูุฅูุงุฑุงุช ุงูุนุฑุจูุฉ ุงููุชุญุฏุฉ', code: '+971' }, { name: 'ุงูููููุฉ ุงููุชุญุฏุฉ', code: '+44' },
             { name: 'ุงูููุงูุงุช ุงููุชุญุฏุฉ', code: '+1' }, { name: 'ุฃูุฑูุบูุงู', code: '+598' }, { name: 'ุฃูุฒุจูุณุชุงู', code: '+998' },
             { name: 'ูุงููุงุชู', code: '+678' }, { name: 'ููุฒูููุง', code: '+58' }, { name: 'ููุชูุงู', code: '+84' },
             { name: 'ุฌุฒุฑ ููุฑุฌู ุงูุจุฑูุทุงููุฉ', code: '+1284' }, { name: 'ุฌุฒุฑ ููุฑุฌู ุงูุฃูุฑูููุฉ', code: '+1340' },
             { name: 'ูุงููุณ ูููุชููุง', code: '+681' }, { name: 'ุงูููู', code: '+967' }, { name: 'ุฒุงูุจูุง', code: '+260' },
             { name: 'ุฒููุจุงุจูู', code: '+263' }
        ];

        // --- Event Listeners Initialization ---
        document.addEventListener("DOMContentLoaded", function() {
            initCountryCodeDropdown();
            loadCourses();

            const phoneInput = document.getElementById('phone-number');
            phoneInput.addEventListener('input', function(e) {
                if (e.target.value.startsWith('0')) {
                    e.target.value = e.target.value.substring(1);
                }
            });
        });

        // --- Functions for Course Management ---
        function loadCourses() {
            const selector = document.getElementById('course-selector');
            const loadingIndicator = document.createElement('div');
            loadingIndicator.className = 'text-center my-3';
            loadingIndicator.innerHTML = '<div class="spinner-border text-primary" role="status"><span class="visually-hidden">ุฌุงุฑู ุงูุชุญููู...</span></div>';
            selector.parentNode.appendChild(loadingIndicator);

            fetch(CSV_SHEET_URL).then(response => {
                if (!response.ok) throw new Error('Network response was not ok');
                return response.text();
            }).then(csvText => {
                coursesDB = parseCSV(csvText);
                populateCourseDropdown();
                selector.disabled = false;
                loadingIndicator.remove();
            }).catch(error => {
                console.error('Error fetching courses:', error);
                selector.innerHTML = '<option value="" disabled selected>ูุดู ุชุญููู ุงููุนุงููุงุช ุงูุชุฏุฑูุจูุฉ!</option>';
                selector.disabled = true;
                loadingIndicator.remove();
                const errorDiv = document.createElement('div');
                errorDiv.className = 'alert alert-danger mt-3';
                errorDiv.innerHTML = `<i class="fas fa-exclamation-circle"></i> ุนุฐุฑูุงุ ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุชุญููู ุงููุนุงููุงุช ุงูุชุฏุฑูุจูุฉ. ูุฑุฌู ุชุญุฏูุซ ุงูุตูุญุฉ ุฃู ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู ูุงุญููุง.`;
                selector.parentNode.appendChild(errorDiv);
            });
        }

        function parseCSV(text) {
            const courses = {};
            const lines = text.split(/\r?\n/);
            if (lines.length < 2) return {};
            const headers = lines[0].split(',').map(h => h.trim());
            const idIndex = headers.indexOf('id');
            const nameIndex = headers.indexOf('name');
            const dateIndex = headers.indexOf('date');
            const basePriceIndex = headers.indexOf('basePrice');
            const cpdFeeIndex = headers.indexOf('cpdFee');
            const statusIndex = headers.indexOf('status');
            const facebookLinkIndex = headers.indexOf('facebookLink');
            const instructorIndex = headers.indexOf('instructor');
            const cpdPointsIndex = headers.indexOf('cpdPoints');

            for (let i = 1; i < lines.length; i++) {
                if (!lines[i]) continue;
                const data = lines[i].split(',');
                if (data.length > statusIndex && data[statusIndex].trim().toLowerCase() === 'active') {
                    const id = data[idIndex] ? data[idIndex].trim() : `course_${i}`;
                    courses[id] = {
                        name: data[nameIndex]?.trim() || 'N/A',
                        date: data[dateIndex]?.trim() || 'N/A',
                        currency: "ุฏููุงุฑ ุฃุฑุฏูู",
                        basePrice: parseInt(data[basePriceIndex]?.trim()) || 0,
                        cpdFee: parseInt(data[cpdFeeIndex]?.trim()) || 0,
                        facebookLink: data[facebookLinkIndex]?.trim() || '',
                        instructor: data[instructorIndex]?.trim() || '',
                        cpdPoints: parseInt(data[cpdPointsIndex]?.trim()) || 0
                    };
                }
            }
            return courses;
        }

        function populateCourseDropdown() {
            const selector = document.getElementById('course-selector');
            selector.innerHTML = '<option value="" disabled selected>-- ุงุฎุชุฑ ูุนุงููุฉ ุชุฏุฑูุจูุฉ --</option>';
            let courseCount = 0;
            for (const id in coursesDB) {
                const option = document.createElement('option');
                option.value = id;
                option.textContent = coursesDB[id].name;
                selector.appendChild(option);
                courseCount++;
            }
            if (courseCount === 0) {
                 selector.innerHTML = '<option value="" disabled selected>-- ูุง ุชูุฌุฏ ูุนุงููุงุช ุชุฏุฑูุจูุฉ ูุชุงุญุฉ ุญุงููุงู --</option>';
            }
        }

        function onCourseSelect() {
            const selector = document.getElementById('course-selector');
            const courseId = selector.value;
            const fieldsWrapper = document.getElementById('registration-fields');
            const detailsDisplay = document.getElementById('course-details-display');

            if (courseId && coursesDB[courseId]) {
                currentCourse = coursesDB[courseId];
                loadCourseData(currentCourse);
                fieldsWrapper.style.display = 'block';
            } else {
                fieldsWrapper.style.display = 'none';
                detailsDisplay.innerHTML = '';
            }
        }

        function loadCourseData(course) {
            let detailsHTML = `ูููุฐุฌ ุงูุชุณุฌูู ูู ูุนุงููุฉ ุชุฏุฑูุจูุฉ <strong>${course.name}</strong><br><small>(${course.date})</small>`;
            if (course.instructor) detailsHTML += `<span class="instructor-name"><i class="fas fa-chalkboard-teacher me-1"></i> ุงููุฏุฑุจ: ${course.instructor}</span>`;
            if (course.cpdPoints > 0) detailsHTML += `<span class="cpd-points-display"><i class="fas fa-award me-1"></i> ${course.cpdPoints} ููุทุฉ CPD ูุนุชูุฏุฉ</span>`;
            if (course.facebookLink && course.facebookLink.startsWith('http')) {
                detailsHTML += `<a href="${course.facebookLink}" target="_blank" class="brand-green mt-1 d-block"><i class="fab fa-facebook me-2"></i> ูุดุงูุฏุฉ ุชูุงุตูู ุงููุนุงููุฉ ุงูุชุฏุฑูุจูุฉ ุนูู ููุณุจูู</a>`;
            }
            document.getElementById('course-details-display').innerHTML = detailsHTML;
            document.getElementById('total-fee').innerText = `${course.basePrice} ${course.currency}`;
            document.getElementById('cpd-fee-display').innerText = course.cpdFee;
            document.getElementById('course-id-input').value = course.name;
            document.getElementById('cpd').value = 'ูุง';
            toggleCPDFields('ูุง');
        }

        // --- Functions for UI Interaction ---
        function toggleCPDFields(value) {
            const cpdSection = document.getElementById('cpd-fields');
            const totalFee = document.getElementById('total-fee');
            if (value === 'ูุนู' && currentCourse) {
                cpdSection.style.display = 'block';
                totalFee.innerText = `${currentCourse.basePrice + currentCourse.cpdFee} ${currentCourse.currency}`;
            } else if(currentCourse) {
                cpdSection.style.display = 'none';
                totalFee.innerText = `${currentCourse.basePrice} ${currentCourse.currency}`;
            }
        }

        function toggleOtherNationality(value) {
            const otherField = document.getElementById('other-nationality-field');
            otherField.style.display = (value === 'ุฃุฎุฑู') ? 'block' : 'none';
        }

        // --- Functions for Country Code Dropdown ---
        function initCountryCodeDropdown() {
            const searchInput = document.getElementById('country-code-search');
            const hiddenInput = document.getElementById('country-code-value');
            const listElement = document.getElementById('country-list');

            function setDefaultCountry() {
                const defaultCountry = countries.find(c => c.code === '+962');
                if (defaultCountry) {
                    searchInput.value = `${defaultCountry.name} (${defaultCountry.code})`;
                    hiddenInput.value = defaultCountry.code;
                }
            }

            function filterList() {
                const searchTerm = searchInput.value.toLowerCase();
                const items = listElement.getElementsByTagName('li');
                let hasResults = false;
                for (const item of items) {
                    const itemName = item.dataset.name.toLowerCase();
                    const itemCode = item.dataset.code;
                    if (itemName.includes(searchTerm) || itemCode.includes(searchTerm)) {
                        item.style.display = 'block';
                        hasResults = true;
                    } else {
                        item.style.display = 'none';
                    }
                }
                listElement.style.display = hasResults ? 'block' : 'none';
            }

            function selectCountry(e) {
                if (e.target && e.target.tagName === 'LI') {
                    const code = e.target.dataset.code;
                    const name = e.target.dataset.name;
                    searchInput.value = `${name} (${code})`;
                    hiddenInput.value = code;
                    listElement.style.display = 'none';
                }
            }

            countries.forEach(country => {
                const li = document.createElement('li');
                li.textContent = `${country.name} (${country.code})`;
                li.dataset.code = country.code;
                li.dataset.name = country.name;
                listElement.appendChild(li);
            });

            setDefaultCountry();
            searchInput.addEventListener('input', filterList);
            searchInput.addEventListener('focus', () => listElement.style.display = 'block');
            listElement.addEventListener('click', selectCountry);
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.custom-country-code-dropdown')) {
                    listElement.style.display = 'none';
                }
            });
        }

        // --- Form Validation and Submission ---
        function validateForm() {
            const errors = [];
            const fullNameAr = document.getElementById('fullNameAr').value.trim();
            const fullNameEn = document.getElementById('fullNameEn').value.trim();
            const email = document.getElementById('email').value.trim();
            const countryCodeInput = document.getElementById('country-code-search').value;
            const phoneNumber = document.getElementById('phone-number').value.trim();
            const terms = document.getElementById('terms').checked;
            const nationality = document.getElementById('nationality').value;
            const otherNationality = document.getElementById('other-nationality-field').querySelector('input').value.trim();
            const cpdRequest = document.getElementById('cpd').value;
            const nationalId = document.getElementById('nationalId').value.trim();
            const licenseNo = document.getElementById('licenseNo').value.trim();

            if (!/^[\u0600-\u06FF\s]+$/.test(fullNameAr)) errors.push('ุงูุงุณู ุจุงูุนุฑุจูุฉ ูุฌุจ ุฃู ูุญุชูู ุนูู ุฃุญุฑู ุนุฑุจูุฉ ููุท.');
            if (!/^[a-zA-Z\s]+$/.test(fullNameEn)) errors.push('The English name should contain only English letters.');
            if (!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(email)) errors.push('ูุฑุฌู ุฅุฏุฎุงู ุจุฑูุฏ ุฅููุชุฑููู ุตุญูุญ.');
            if (!countries.some(c => `${c.name} (${c.code})` === countryCodeInput.trim())) errors.push('ูุฑุฌู ุงุฎุชูุงุฑ ุฑูุฒ ุจูุฏ ุตุญูุญ ูู ุงููุงุฆูุฉ.');
            if (!/^[1-9][0-9]{6,14}$/.test(phoneNumber)) errors.push('ูุฑุฌู ุฅุฏุฎุงู ุฑูู ูุงุชู ูุญูู ุตุญูุญ (ุจุฏูู ุงูุตูุฑ ูู ุงูุจุฏุงูุฉุ ูุซู 79xxxxxxx).');
            if (!nationality) errors.push('ูุฑุฌู ุงุฎุชูุงุฑ ุงูุฌูุณูุฉ.');
            if (nationality === 'ุฃุฎุฑู' && !otherNationality) errors.push('ูุฑุฌู ุชุญุฏูุฏ ุจูุฏ ุงูุฌูุณูุฉ.');
            if (cpdRequest === 'ูุนู' && (!nationalId || !licenseNo)) errors.push('ุนูุฏ ุทูุจ ุดูุงุฏุฉ CPDุ ูุฌุจ ุฅุฏุฎุงู ุงูุฑูู ุงููุทูู ูุฑูู ุงููุฒุงููุฉ.');
            if (!terms) errors.push('ูุฌุจ ุงูููุงููุฉ ุนูู ุงูุชุนูุฏ ูุงูุฅูุฑุงุฑ ูุฅููุงู ุงูุชุณุฌูู.');

            if (errors.length > 0) {
                const errorModal = new bootstrap.Modal(document.getElementById('errorModal'));
                document.getElementById('errorMessage').innerHTML = errors.join('<br>');
                errorModal.show();
                return false;
            }
            return true;
        }

        document.getElementById('registrationForm').addEventListener('submit', function(e) {
            e.preventDefault();
            if (!validateForm()) return;

            const form = e.target;
            const data = new FormData(form);
            // !!! ุชู ุชุญุฏูุซ ุงูุฑุงุจุท ููุง !!!
            const scriptURL = 'https://script.google.com/macros/s/AKfycbwXxN0o8q7vb5DY6AZrZ4t5-hOG3w7bDgil9lbROC4CYJ71VpBO8USQVlPJcmNCOqb4/exec'; 
            const submitButton = form.querySelector('button[type="submit"]');

            const countryCode = document.getElementById('country-code-value').value;
            const phoneNumber = document.getElementById('phone-number').value.trim();
            const fullPhoneNumber = countryCode + phoneNumber;
            data.set('WhatsApp', fullPhoneNumber);
            data.delete('CountryCode');
            data.delete('Phone Number');

            submitButton.disabled = true;
            submitButton.innerHTML = '<span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span> ุฌุงุฑู ุงูุฅุฑุณุงู...';

            fetch(scriptURL, { method: 'POST', body: data })
            .then(response => {
                if (!response.ok) throw new Error('Network response was not ok');
                return response.json();
            })
            .then(result => {
                console.log('Success!', result);
                const userEmail = document.getElementById('email').value;
                const successModal = new bootstrap.Modal(document.getElementById('successModal'));
                document.getElementById('successMessage').textContent = `ุดูุฑูุง ูู ุนูู ุงูุชุณุฌูู ูู ูุนุงููุฉ ุชุฏุฑูุจูุฉ ${currentCourse.name}. ุชู ุฅุฑุณุงู ุจุฑูุฏ ุฅููุชุฑููู ุชุฃููุฏู ุฅูู ${userEmail}.`;
                successModal.show();

                setTimeout(() => {
                    document.getElementById('registration-section').style.display = 'none';
                    document.getElementById('payment-section').style.display = 'block';
                    window.scrollTo(0, 0);
                }, 1500);

            })
            .catch(error => {
                console.error('Fetch Error!', error.message);
                submitButton.disabled = false;
                submitButton.textContent = 'ุฃุฑุณู ุจูุงูุงุชู ูุงุนุฑุถ ุทุฑู ุงูุฏูุน';
                const errorModal = new bootstrap.Modal(document.getElementById('errorModal'));
                document.getElementById('errorMessage').textContent = 'ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุฅุฑุณุงู ุงูุจูุงูุงุช. ูุฑุฌู ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู.';
                errorModal.show();
            });
        });

    </script>
</body>
</html>
